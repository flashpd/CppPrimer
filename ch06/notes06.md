# 第6章 函数

## 6.1 函数基础

- **函数定义**：包括返回类型、函数名字和0个或者多个形参（parameter）组成的列表和函数体。
- **调用运算符**：调用运算符的形式是一对圆括号`()`，作用于一个表达式，该表达式是函数或者指向函数的指针。
- 圆括号内是用逗号隔开的实参（argument）列表。
- 函数调用过程：
  - 主调函数（calling function）的执行被中断。
  - 被调函数（called function）开始执行。
- **形参和实参**：形参和实参的个数和类型必须匹配上。
- **返回类型**： `void`表示函数不返回任何值。函数的返回类型不能是数组类型或者函数类型，但可以是指向数组或者函数的指针。
- **名字**：名字的作用于是程序文本的一部分，名字在其中可见。



## 6.2 参数传递

- 引用传递
- 值传递

如果函数无须改变引用形参的值，最好将其声明为常量引用



### const形参和实参

- 形参的顶层`const`被忽略。`void func(const int i);`调用时既可以传入`const int`也可以传入`int`。
- 我们可以使用非常量初始化一个底层`const`对象，但是反过来不行。
- 在函数中，不能改变实参的局部副本。
- 尽量使用常量引用。

**数组引用形参**：`C++`语言允许将变量定义成数组的引用，形参也可以是数组的引用（195页）

```cpp
void print(int (&arr)[10])
{
	for (auto elem : arr)
		cout << elem << endl;
}
```

**传递多维数组**

```cpp
void print(int (*matrix)[10], int rowSize) { /*...*/ }
void print(int matrix[][10], int rowSize) { /*...*/ }
```



### 含有可变形参的函数

`C++`中提供两种主要的方法

- 如果所有的实参类型相同，可以传递一个名为`initializer_list`的标准库类型（197页）。
- 如果实参类型不同，我们可以编写一种特殊的函数，也就是所谓的可变参数模板（618页）。



### 有返回值函数

- 返回局部对象的引用是错误的
- 返回局部对象的指针也是错误的



### 返回数组指针

```cpp
int arr[10];	// arr是一个含有是个整数的数组
int *p1[10];	// p1是一个含有10个指针的数组
int (*p2)[10] = &arr;	// p2是一个指针，它指向含有10个整数的数组
```



